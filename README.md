# üîê Auth JWT Service

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ –±–∞–∑–µ JWT —Ç–æ–∫–µ–Ω–æ–≤, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π Go.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å–µ—Å—Å–∏—è–º–∏ —á–µ—Ä–µ–∑ JWT —Ç–æ–∫–µ–Ω—ã. –°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤–Ω–µ—à–Ω–µ–π PostgreSQL –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞.

### ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ username/password
- üé´ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT access –∏ refresh —Ç–æ–∫–µ–Ω–æ–≤
- üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ refresh —Ç–æ–∫–µ–Ω—ã
- üë§ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- üè• Health check —ç–Ω–¥–ø–æ–π–Ω—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- üê≥ –ì–æ—Ç–æ–≤—ã–π Docker –æ–±—Ä–∞–∑ –¥–ª—è –¥–µ–ø–ª–æ—è
- üîí Type-safe —Ä–∞–±–æ—Ç–∞ —Å –ë–î —á–µ—Ä–µ–∑ sqlc
- üìö Swagger UI –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
- ‚úÖ Unit —Ç–µ—Å—Ç—ã —Å —Ö–æ—Ä–æ—à–∏–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[API.md](./API.md)** - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ API, –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤, Swagger UI
- **[TESTING.md](./TESTING.md)** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞
- **[LEARNING.md](./LEARNING.md)** - –£—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è Go

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Clean Architecture –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ —Å–ª–æ–∏:

```
auth-jwt-srv/
‚îú‚îÄ‚îÄ cmd/api/                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ config/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.go
‚îÇ   ‚îú‚îÄ‚îÄ handlers/               # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handler.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ health.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.go
‚îÇ   ‚îú‚îÄ‚îÄ service/                # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.go
‚îÇ   ‚îú‚îÄ‚îÄ repository/             # –°–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è sqlc)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users.sql.go
‚îÇ   ‚îî‚îÄ‚îÄ tokens/                 # JWT —É—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ jwt.go
‚îú‚îÄ‚îÄ queries/                    # SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è sqlc
‚îÇ   ‚îú‚îÄ‚îÄ schema.sql
‚îÇ   ‚îî‚îÄ‚îÄ users.sql
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile                  # Multi-stage Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ sqlc.yaml                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è sqlc
‚îú‚îÄ‚îÄ Makefile                    # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ .env.example                # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ go.mod
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.21+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- Docker & Docker Compose (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏)
- PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Ç–∞–±–ª–∏—Ü–µ–π `users`
- sqlc (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ –∏–∑ SQL)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã users

```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL
);
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

#### üê≥ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**

```bash
git clone https://github.com/naavlad/auth-jwt-srv.git
cd auth-jwt-srv
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª:

```env
DATABASE_URL=postgres://user:password@host.docker.internal:5432/dbname?sslmode=disable
JWT_SECRET=your-very-secret-key-min-32-chars
JWT_ACCESS_TOKEN_DURATION=15m
JWT_REFRESH_TOKEN_DURATION=168h
SERVER_PORT=8080
```

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ –≤–∞—à–∞ –ë–î –∑–∞–ø—É—â–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `host.docker.internal` –≤–º–µ—Å—Ç–æ `localhost`

3. **–°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:**

```bash
make docker-up
```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:**

```bash
make docker-logs
```

5. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ API:**

```bash
curl http://localhost:8080/health
```

#### üíª –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

```bash
go mod download
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ sqlc:**

```bash
go install github.com/sqlc-dev/sqlc/cmd/sqlc@latest
```

3. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–∑ SQL:**

```bash
make sqlc-generate
```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` —Ñ–∞–π–ª:**

```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env
```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:**

```bash
make run
```

–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8080`

## üì° –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç API

### Swagger UI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:8080/swagger/index.html
```

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —ç–Ω–¥–ø–æ–π–Ω—Ç—ã –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞!

### Curl –ø—Ä–∏–º–µ—Ä—ã

```bash
# Health check
curl http://localhost:8080/health

# Login
curl -X POST http://localhost:8080/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"user","password":"pass"}'
```

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** –°–º. [API.md](./API.md) –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö.

## üì° API –≠–Ω–¥–ø–æ–π–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | Endpoint        | –û–ø–∏—Å–∞–Ω–∏–µ            | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  |
| ----- | --------------- | ------------------- | --------------- |
| GET   | `/health`       | Health check        | -               |
| POST  | `/auth/login`   | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É      | -               |
| POST  | `/auth/refresh` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞   | -               |
| GET   | `/auth/me`      | –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚úÖ Bearer Token |
| GET   | `/swagger/*`    | Swagger UI          | -               |

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. [API.md](./API.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π, –ø—Ä–∏–º–µ—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ Swagger UI.

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è                   | –û–ø–∏—Å–∞–Ω–∏–µ                       | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ |
| ---------------------------- | ------------------------------ | --------------------- | ----------- |
| `DATABASE_URL`               | PostgreSQL connection string   | -                     | ‚úÖ          |
| `JWT_SECRET`                 | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ JWT | -                     | ‚úÖ          |
| `JWT_ACCESS_TOKEN_DURATION`  | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ access —Ç–æ–∫–µ–Ω–∞      | `15m`                 | ‚ùå          |
| `JWT_REFRESH_TOKEN_DURATION` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ refresh —Ç–æ–∫–µ–Ω–∞     | `168h` (7 –¥–Ω–µ–π)       | ‚ùå          |
| `SERVER_PORT`                | –ü–æ—Ä—Ç –¥–ª—è HTTP —Å–µ—Ä–≤–µ—Ä–∞          | `8080`                | ‚ùå          |

### –§–æ—Ä–º–∞—Ç DATABASE_URL

```
postgres://username:password@host:port/database?sslmode=disable
```

**–ü—Ä–∏–º–µ—Ä—ã:**

```env
# –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î
DATABASE_URL=postgres://myuser:mypass@localhost:5432/authdb?sslmode=disable

# Docker —Å host.docker.internal
DATABASE_URL=postgres://myuser:mypass@host.docker.internal:5432/authdb?sslmode=disable

# –í–Ω–µ—à–Ω—è—è –ë–î
DATABASE_URL=postgres://user:pass@db.example.com:5432/production?sslmode=require
```

### JWT –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–æ—Ä–º–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏:**

- `s` - —Å–µ–∫—É–Ω–¥—ã
- `m` - –º–∏–Ω—É—Ç—ã
- `h` - —á–∞—Å—ã
- `d` - –¥–Ω–∏ (–≤ cleanenv –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ —á–∞—Å—ã)

**–ü—Ä–∏–º–µ—Ä—ã:**

```env
JWT_ACCESS_TOKEN_DURATION=30m     # 30 –º–∏–Ω—É—Ç
JWT_ACCESS_TOKEN_DURATION=1h      # 1 —á–∞—Å
JWT_REFRESH_TOKEN_DURATION=168h   # 7 –¥–Ω–µ–π
JWT_REFRESH_TOKEN_DURATION=720h   # 30 –¥–Ω–µ–π
```

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ—Å—Ç—É–ø–Ω—ã–µ Make –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞              | –û–ø–∏—Å–∞–Ω–∏–µ                       |
| -------------------- | ------------------------------ |
| `make help`          | –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã |
| `make run`           | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å –ª–æ–∫–∞–ª—å–Ω–æ      |
| `make sqlc-generate` | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Go –∫–æ–¥ –∏–∑ SQL    |
| `make swagger`       | –û–±–Ω–æ–≤–∏—Ç—å Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é  |
| `make test`          | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã                |
| `make test-coverage` | –¢–µ—Å—Ç—ã —Å –æ—Ç—á–µ—Ç–æ–º –ø–æ–∫—Ä—ã—Ç–∏—è       |
| `make docker-build`  | –°–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑           |
| `make docker-up`     | –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ Docker Compose     |
| `make docker-down`   | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã   |
| `make docker-logs`   | –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞      |

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
make test

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
make test-coverage
```

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** –°–º. [TESTING.md](./TESTING.md) –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.

### –†–∞–±–æ—Ç–∞ —Å sqlc

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ `queries/*.sql`:

1. –û–±–Ω–æ–≤–∏—Ç–µ SQL —Ñ–∞–π–ª—ã
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é:

```bash
make sqlc-generate
```

3. –ö–æ–¥ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –≤ `internal/repository/`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–π–Ω—Ç–æ–≤

1. **–î–æ–±–∞–≤—å—Ç–µ SQL –∑–∞–ø—Ä–æ—Å** –≤ `queries/users.sql`
2. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–¥:** `make sqlc-generate`
3. **–î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥ –≤ service** (`internal/service/auth.go`)
4. **–°–æ–∑–¥–∞–π—Ç–µ handler** (`internal/handlers/auth.go`)
5. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Ä–æ—É—Ç** –≤ `cmd/api/main.go`

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **[Go 1.25](https://go.dev/)** - –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **[Chi](https://github.com/go-chi/chi)** - HTTP —Ä–æ—É—Ç–µ—Ä
- **[sqlc](https://sqlc.dev/)** - Type-safe SQL –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- **[pgx/v5](https://github.com/jackc/pgx)** - PostgreSQL –¥—Ä–∞–π–≤–µ—Ä
- **[golang-jwt/jwt](https://github.com/golang-jwt/jwt)** - JWT –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **[cleanenv](https://github.com/ilyakaznacheev/cleanenv)** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **[Swagger/OpenAPI](https://swagger.io/)** - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[Testify](https://github.com/stretchr/testify)** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Docker & Docker Compose** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

## üìö –û–±—É—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è Go! –°–º. **[LEARNING.md](./LEARNING.md)** –¥–ª—è:

- üéØ –ü–æ—à–∞–≥–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞ –∏–∑—É—á–µ–Ω–∏—è (4 –Ω–µ–¥–µ–ª–∏)
- üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π (3 —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏)
- üìñ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –∫–Ω–∏–≥
- ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç–æ–≤ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

**–ß—Ç–æ –≤—ã –∏–∑—É—á–∏—Ç–µ:**

- –û—Å–Ω–æ–≤—ã Go –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–æ–≤
- HTTP/REST API —Å Chi —Ä–æ—É—Ç–µ—Ä–æ–º
- –†–∞–±–æ—Ç—É —Å PostgreSQL —á–µ—Ä–µ–∑ sqlc
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- Clean Architecture
- Docker –∏ DevOps
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (unit, integration)
- Swagger/OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## üì¶ Docker

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞

```bash
docker build -t auth-jwt-srv:latest .
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
docker run -d \
  --name auth-jwt-srv \
  -p 8080:8080 \
  -e DATABASE_URL="postgres://user:pass@host:5432/db" \
  -e JWT_SECRET="your-secret-key" \
  auth-jwt-srv:latest
```

### Docker Compose

```bash
# –ó–∞–ø—É—Å–∫
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f app

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **JWT_SECRET:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–π –∫–ª—é—á (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
2. **DATABASE_URL:** –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ git
3. **–ü–∞—Ä–æ–ª–∏:** –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
4. **SSL/TLS:** –í–∫–ª—é—á–∞–π—Ç–µ `sslmode=require` –¥–ª—è production –ë–î
5. **HTTPS:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ reverse proxy (nginx) —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
6. **Rate Limiting:** –î–æ–±–∞–≤—å—Ç–µ middleware –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞

```bash
# Linux/macOS
openssl rand -base64 32

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Go
go run -c 'package main; import ("crypto/rand"; "encoding/base64"; "fmt"); func main() { b := make([]byte, 32); rand.Read(b); fmt.Println(base64.StdEncoding.EncodeToString(b)) }'
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# Docker
make docker-logs

# –õ–æ–∫–∞–ª—å–Ω–æ - –ª–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ stdout
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

```bash
# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec -it auth-jwt-srv ./main

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑ host –º–∞—à–∏–Ω—ã
psql $DATABASE_URL -c "SELECT 1"
```

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** `Failed to connect to database`

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞
- –î–ª—è Docker –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `host.docker.internal`

**–ü—Ä–æ–±–ª–µ–º–∞:** `invalid refresh token`

- –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫
- –ù–µ–≤–µ—Ä–Ω—ã–π `JWT_SECRET`
- –¢–æ–∫–µ–Ω –±—ã–ª —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω —Å –¥—Ä—É–≥–∏–º –∫–ª—é—á–æ–º

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/health` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:

```bash
curl -f http://localhost:8080/health || exit 1
```

### Docker Health Check

–î–æ–±–∞–≤—å—Ç–µ –≤ `Dockerfile`:

```dockerfile
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD wget --no-verbose --tries=1 --spider http://localhost:8080/health || exit 1
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. LICENSE —Ñ–∞–π–ª

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ü–∏—è

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature –≤–µ—Ç–∫—É (`git checkout -b feature/amazing-feature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. Push –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã

GitHub: [@naavlad](https://github.com/naavlad)

---

‚≠ê –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –±—ã–ª –ø–æ–ª–µ–∑–µ–Ω, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É –Ω–∞ GitHub!
